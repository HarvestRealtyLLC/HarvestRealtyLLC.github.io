<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Properties | Harvest Realty LLC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --burgundy: #8B2E2E;
            --burgundy-dark: #6B1E1E;
            --burgundy-light: #A84040;
            --gold: #D4AF37;
            --gold-dark: #B8941F;
            --cream: #F5F1E8;
            --cream-dark: #E8E0D0;
            --charcoal: #2C2C2C;
            --white: #FFFFFF;
            --shadow: rgba(139, 46, 46, 0.15);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: var(--cream);
            color: var(--charcoal);
            line-height: 1.6;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            line-height: 1.2;
        }
        
        /* Header */
        header {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background: linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(245,241,232,0.95) 100%);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px var(--shadow);
        }
        
        nav {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 3rem;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
        }
        
        .logo-container img { height: 60px; width: auto; }
        
        .logo-text h1 {
            font-size: 1.8rem;
            color: var(--burgundy);
            margin-bottom: 0.2rem;
        }
        
        .logo-text p {
            font-size: 0.85rem;
            color: var(--gold-dark);
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--charcoal);
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover { color: var(--burgundy); }
        
        .nav-links a.active {
            color: var(--burgundy);
            border-bottom: 2px solid var(--gold);
            padding-bottom: 0.25rem;
        }
        
        .cta-button {
            background: linear-gradient(135deg, var(--burgundy) 0%, var(--burgundy-dark) 100%);
            color: var(--white) !important;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
        }
        
        /* Mobile Menu */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--burgundy);
            cursor: pointer;
        }
        
        /* Main Content */
        main {
            padding-top: 100px;
        }
        
        /* Hero Section */
        .page-hero {
            background: linear-gradient(135deg, var(--burgundy) 0%, var(--burgundy-dark) 100%);
            padding: 4rem 3rem;
            text-align: center;
            color: var(--white);
        }
        
        .page-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .page-hero p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Filters */
        .filters-section {
            background: var(--white);
            padding: 2rem 3rem;
            box-shadow: 0 5px 20px var(--shadow);
        }
        
        .filters-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .filter-group label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--charcoal);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .filter-group select,
        .filter-group input {
            padding: 0.75rem 1rem;
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.95rem;
            min-width: 150px;
            background: var(--white);
        }
        
        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: var(--burgundy);
        }
        
        .filter-btn {
            padding: 0.75rem 2rem;
            background: linear-gradient(135deg, var(--burgundy) 0%, var(--burgundy-dark) 100%);
            color: var(--white);
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin-top: 1.25rem;
        }
        
        .filter-btn:hover { transform: translateY(-2px); }
        
        .reset-btn {
            padding: 0.75rem 1.5rem;
            background: var(--cream);
            color: var(--charcoal);
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 1.25rem;
        }
        
        /* Properties Grid */
        .properties-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem;
        }
        
        .results-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .results-count {
            font-size: 1.1rem;
            color: var(--charcoal);
        }
        
        .results-count strong { color: var(--burgundy); }
        
        .sort-select {
            padding: 0.5rem 1rem;
            border: 2px solid var(--cream-dark);
            border-radius: 8px;
            font-family: inherit;
        }
        
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }
        
        /* Property Card */
        .property-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px var(--shadow);
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
        }
        
        .property-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px var(--shadow);
        }
        
        .property-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 10;
        }
        
        .status-active { background: rgba(76, 175, 80, 0.9); color: var(--white); }
        .status-under-contract { background: rgba(255, 193, 7, 0.9); color: var(--charcoal); }
        .status-sold { background: rgba(139, 46, 46, 0.9); color: var(--white); }
        .status-rental { background: rgba(33, 150, 243, 0.9); color: var(--white); }
        
        .property-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        
        .property-card:hover .property-image {
            transform: scale(1.05);
        }
        
        .property-info { padding: 1.5rem; }
        
        .property-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--burgundy);
            font-family: 'Cormorant Garamond', serif;
            margin-bottom: 0.5rem;
        }
        
        .property-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--charcoal);
        }
        
        .property-location {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.75rem;
        }
        
        .property-features {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            font-size: 0.9rem;
            color: var(--charcoal);
        }
        
        .property-features span {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        
        /* Loading State */
        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--charcoal);
            grid-column: 1 / -1;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--cream-dark);
            border-top-color: var(--burgundy);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* No Results */
        .no-results {
            text-align: center;
            padding: 4rem;
            color: #666;
            grid-column: 1 / -1;
        }
        
        .no-results h3 {
            color: var(--burgundy);
            margin-bottom: 1rem;
        }
        
        /* Footer */
        footer {
            background: var(--charcoal);
            color: var(--white);
            padding: 3rem;
            text-align: center;
            margin-top: 3rem;
        }
        
        footer a { color: var(--gold); text-decoration: none; }
        
        /* Mobile Responsive */
        @media (max-width: 900px) {
            nav { padding: 1rem; }
            .nav-links { 
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--white);
                flex-direction: column;
                padding: 1rem;
                box-shadow: 0 5px 20px var(--shadow);
            }
            .nav-links.active { display: flex; }
            .mobile-menu-toggle { display: block; }
            .logo-container img { height: 45px; }
            .logo-text h1 { font-size: 1.4rem; }
            .page-hero { padding: 3rem 1.5rem; }
            .page-hero h1 { font-size: 2rem; }
            .filters-section { padding: 1.5rem; }
            .filters-container { flex-direction: column; align-items: stretch; }
            .filter-group { width: 100%; }
            .filter-group select,
            .filter-group input { width: 100%; }
            .properties-section { padding: 1.5rem; }
            .properties-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo-container">
                <img src="hrg-logo.png" alt="Harvest Realty LLC Logo" onerror="this.style.display='none'">
                <div class="logo-text">
                    <h1>Harvest Realty LLC</h1>
                    <p>PA & NJ Experts</p>
                </div>
            </a>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">‚ò∞</button>
            <div class="nav-links" id="navLinks">
                <a href="index.html">Home</a>
                <a href="index.html#services">Services</a>
                <a href="properties.html" class="active">Properties</a>
                <a href="index.html#team">Our Team</a>
                <a href="partners.html">Partners</a>
                <a href="index.html#about">About</a>
                <a href="index.html#contact">Contact</a>
                <a href="tenants.html">Tenants</a>
                <a href="portal.html" style="background: var(--charcoal); color: var(--white); padding: 0.5rem 1rem; border-radius: 5px;">üîê Agent Login</a>
                <a href="https://cal.com/harvestrealtyllc" target="_blank" class="cta-button">Schedule Consultation</a>
            </div>
        </nav>
    </header>

    <main>
        <section class="page-hero">
            <h1>Our Properties</h1>
            <p>Browse our current listings, properties under contract, and recently sold homes in the Greater Philadelphia area.</p>
        </section>

        <section class="filters-section">
            <div class="filters-container">
                <div class="filter-group">
                    <label>Status</label>
                    <select id="filterStatus">
                        <option value="">All Status</option>
                        <option value="Active">Active</option>
                        <option value="Under Contract">Under Contract</option>
                        <option value="Sold">Sold</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Type</label>
                    <select id="filterType">
                        <option value="">All Types</option>
                        <option value="Residential">Residential</option>
                        <option value="Duplex">Duplex</option>
                        <option value="Land">Land</option>
                        <option value="Commercial">Commercial</option>
                        <option value="Rental">Rental</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Min Price</label>
                    <input type="number" id="filterMinPrice" placeholder="Min $">
                </div>
                <div class="filter-group">
                    <label>Max Price</label>
                    <input type="number" id="filterMaxPrice" placeholder="Max $">
                </div>
                <div class="filter-group">
                    <label>Beds</label>
                    <select id="filterBeds">
                        <option value="">Any</option>
                        <option value="1">1+</option>
                        <option value="2">2+</option>
                        <option value="3">3+</option>
                        <option value="4">4+</option>
                        <option value="5">5+</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Baths</label>
                    <select id="filterBaths">
                        <option value="">Any</option>
                        <option value="1">1+</option>
                        <option value="2">2+</option>
                        <option value="3">3+</option>
                    </select>
                </div>
                <button class="filter-btn" onclick="applyFilters()">üîç Search</button>
                <button class="reset-btn" onclick="resetFilters()">Reset</button>
            </div>
        </section>

        <section class="properties-section">
            <div class="results-info">
                <p class="results-count">Showing <strong id="resultsCount">0</strong> properties</p>
                <select class="sort-select" id="sortSelect" onchange="sortProperties()">
                    <option value="newest">Newest First</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="beds">Bedrooms</option>
                </select>
            </div>
            
            <div id="propertiesGrid" class="properties-grid">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Loading properties...</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 Harvest Realty LLC. All rights reserved.</p>
        <p style="margin-top: 0.5rem;">
            <a href="index.html">Home</a> ‚Ä¢ 
            <a href="privacy.html">Privacy Policy</a> ‚Ä¢ 
            <a href="terms.html">Terms of Service</a>
        </p>
    </footer>

    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://zzjunmkcdpdxhmhiggno.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp6anVubWtjZHBkeGhtaGlnZ25vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgyNzM1MDIsImV4cCI6MjA4Mzg0OTUwMn0.HYHck2haMWyEQh1sSXGjh9nWqPXmfvXeE60HBTVx-KM';
        
        let allProperties = [];
        let filteredProperties = [];
        
        // Load properties from Supabase using REST API
        async function loadProperties() {
            try {
                const response = await fetch(
                    `${SUPABASE_URL}/rest/v1/listings?select=*&order=created_at.desc`,
                    {
                        headers: {
                            'apikey': SUPABASE_ANON_KEY,
                            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                            'Content-Type': 'application/json'
                        }
                    }
                );
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const listings = await response.json();
                
                allProperties = listings || [];
                filteredProperties = [...allProperties];
                renderProperties();
                
            } catch (err) {
                console.error('Error:', err);
                showError();
            }
        }
        
        // Render properties to grid
        function renderProperties() {
            const grid = document.getElementById('propertiesGrid');
            const countEl = document.getElementById('resultsCount');
            
            countEl.textContent = filteredProperties.length;
            
            if (filteredProperties.length === 0) {
                grid.innerHTML = `
                    <div class="no-results">
                        <h3>No Properties Found</h3>
                        <p>Try adjusting your filters or check back later for new listings.</p>
                        <button onclick="resetFilters()" style="margin-top: 1rem; padding: 0.75rem 2rem; background: var(--burgundy); color: white; border: none; border-radius: 10px; cursor: pointer;">View All Properties</button>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filteredProperties.map(property => {
                const statusClass = getStatusClass(property.status);
                const featuresHTML = getFeaturesHTML(property);
                const priceDisplay = formatPrice(property.price);
                const photoUrl = property.photo_url || 'photos/placeholder.jpg';
                
                return `
                    <div class="property-card" onclick="viewProperty('${property.id}')">
                        <span class="property-status ${statusClass}">${property.status}</span>
                        <img src="${photoUrl}" alt="${property.address}" class="property-image" onerror="this.src='photos/placeholder.jpg'">
                        <div class="property-info">
                            <div class="property-price">${priceDisplay}</div>
                            <h3 class="property-title">${getShortTitle(property.address)}</h3>
                            <p class="property-location">üìç ${property.address}</p>
                            ${featuresHTML}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Helper functions
        function getStatusClass(status) {
            const statusMap = {
                'Active': 'status-active',
                'Under Contract': 'status-under-contract',
                'Sold': 'status-sold',
                'Rental': 'status-rental'
            };
            return statusMap[status] || 'status-active';
        }
        
        function getFeaturesHTML(property) {
            const features = [];
            if (property.beds) features.push(`<span>üõèÔ∏è ${property.beds} Beds</span>`);
            if (property.baths) features.push(`<span>üöø ${property.baths} Baths</span>`);
            if (property.sqft) features.push(`<span>üìê ${property.sqft} sqft</span>`);
            if (!features.length && property.property_type) {
                features.push(`<span>üìã ${property.property_type}</span>`);
            }
            return features.length ? `<div class="property-features">${features.join('')}</div>` : '';
        }
        
        function formatPrice(price) {
            if (!price) return 'Contact for Price';
            if (typeof price === 'string' && price.includes('$')) return price;
            return '$' + Number(price).toLocaleString();
        }
        
        function getShortTitle(address) {
            return address ? address.split(',')[0] : 'Property';
        }
        
        function parsePrice(price) {
            if (!price) return 0;
            return parseInt(String(price).replace(/[$,\/mo]/g, '')) || 0;
        }
        
        // Navigate to property detail
        function viewProperty(id) {
            window.location.href = `property.html?id=${id}`;
        }
        
        // Filter functions
        function applyFilters() {
            const status = document.getElementById('filterStatus').value;
            const type = document.getElementById('filterType').value;
            const minPrice = parseInt(document.getElementById('filterMinPrice').value) || 0;
            const maxPrice = parseInt(document.getElementById('filterMaxPrice').value) || Infinity;
            const beds = parseInt(document.getElementById('filterBeds').value) || 0;
            const baths = parseInt(document.getElementById('filterBaths').value) || 0;
            
            filteredProperties = allProperties.filter(p => {
                const price = parsePrice(p.price);
                
                if (status && p.status !== status) return false;
                if (type && p.property_type !== type) return false;
                if (price < minPrice) return false;
                if (price > maxPrice) return false;
                if (beds && (!p.beds || p.beds < beds)) return false;
                if (baths && (!p.baths || p.baths < baths)) return false;
                
                return true;
            });
            
            sortProperties();
        }
        
        function resetFilters() {
            document.getElementById('filterStatus').value = '';
            document.getElementById('filterType').value = '';
            document.getElementById('filterMinPrice').value = '';
            document.getElementById('filterMaxPrice').value = '';
            document.getElementById('filterBeds').value = '';
            document.getElementById('filterBaths').value = '';
            
            filteredProperties = [...allProperties];
            renderProperties();
        }
        
        function sortProperties() {
            const sortBy = document.getElementById('sortSelect').value;
            
            filteredProperties.sort((a, b) => {
                switch (sortBy) {
                    case 'price-high':
                        return parsePrice(b.price) - parsePrice(a.price);
                    case 'price-low':
                        return parsePrice(a.price) - parsePrice(b.price);
                    case 'beds':
                        return (b.beds || 0) - (a.beds || 0);
                    case 'newest':
                    default:
                        return new Date(b.created_at) - new Date(a.created_at);
                }
            });
            
            renderProperties();
        }
        
        function showError() {
            document.getElementById('propertiesGrid').innerHTML = `
                <div class="no-results">
                    <h3>Unable to Load Properties</h3>
                    <p>Please try again later or contact us directly.</p>
                    <a href="tel:215-519-4096" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 2rem; background: var(--burgundy); color: white; border-radius: 10px; text-decoration: none;">üìû Call Us</a>
                </div>
            `;
        }
        
        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
            this.textContent = navLinks.classList.contains('active') ? '‚úï' : '‚ò∞';
        });
        
        // Load properties on page load
        document.addEventListener('DOMContentLoaded', loadProperties);
    </script>
</body>
</html>
